(this.webpackJsonpbvs_unity_game=this.webpackJsonpbvs_unity_game||[]).push([[0],[,,,,,,function(e,t,n){e.exports={Navbar:"navbar_Navbar__3PxbQ",title:"navbar_title__RCLI3",navButton:"navbar_navButton__2LemL",active:"navbar_active__39chN",pages:"navbar_pages__qgGYC"}},function(e,t,n){e.exports={Login:"Login_Login__tf7ua",Content:"Login_Content__2X69_",input:"Login_input__36GEz",Form:"Login_Form__joPfR",Wrong:"Login_Wrong__2fN4p"}},,,,,function(e,t,n){e.exports={Form:"Form_Form__1dRuo",Box:"Form_Box__1xrJ5"}},function(e,t,n){e.exports={TextInput:"TextInput_TextInput__3GIVo",Wrong:"TextInput_Wrong__2V5vb"}},function(e,t,n){e.exports={NumberInput:"NumberInput_NumberInput__2wBxG",Wrong:"NumberInput_Wrong__1lM4i"}},function(e,t,n){e.exports={Radio:"Radio_Radio__3q7yR",option:"Radio_option__2rmPj"}},,function(e,t,n){e.exports={GameLabel:"GameLabel_GameLabel__225yT",MobileLabel:"GameLabel_MobileLabel__HqxA7"}},function(e,t,n){e.exports={AudioRecorder:"AudioRecorder_AudioRecorder__1rzAT",Recording:"AudioRecorder_Recording__38jbA"}},,,,,,function(e,t,n){e.exports={App:"App_App__1-QqC","App-logo":"App_App-logo__elqEI","App-logo-spin":"App_App-logo-spin__k2o3P","App-header":"App_App-header__22LXj","App-link":"App_App-link__1acGg",Mobile:"App_Mobile__1CNpl"}},function(e,t,n){e.exports={Footer:"footer_Footer__2XqUH"}},function(e,t,n){e.exports={Checkbox:"Checkbox_Checkbox__2IsiI"}},function(e,t,n){e.exports={Unity:"Game_Unity__vFcUV"}},,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(23),r=n.n(i),s=(n(32),n(2)),c=n(3),d=n(5),l=n(4),u=n(24),g=n.n(u),h=n(10),p=n(6),v=n.n(p),m=n(0),b=function(e){var t=e.loggedOut;t=e.logged?["Logout"].concat(Object(h.a)(e.loggedIn),Object(h.a)(t)):["Login"].concat(Object(h.a)(t));var n=[v.a.navButton,v.a.active].join(" "),a=v.a.navButton,o=t.map((function(t){return Object(m.jsx)("button",{onClick:function(){return e.changePage(t)},className:t===e.page?n:a,active:"true",children:t},t)}));return Object(m.jsxs)("div",{className:v.a.Navbar,children:[Object(m.jsx)("h3",{className:v.a.title,children:"VisualSpeech Sibilants Game"}),Object(m.jsx)("div",{className:v.a.pages,children:o})]})},j=n(25),f=n.n(j),x=function(e){return Object(m.jsxs)("div",{className:f.a.Footer,children:[Object(m.jsx)("span",{children:" \xa9"})," BioVisualSpeech"]})},_=n(7),O=n.n(_),C=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={password:""},e.onChangePassword=function(t){var n=t.target.value;e.setState({password:n})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.wrong?[O.a.Form,O.a.Wrong].join(" "):O.a.Form;return Object(m.jsx)("div",{className:O.a.Login,children:Object(m.jsxs)("div",{className:O.a.Content,children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("div",{className:t,children:[Object(m.jsxs)("div",{className:O.a.input,children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",onChange:this.onChangePassword})]}),Object(m.jsx)("p",{children:"Password Errada"}),Object(m.jsx)("button",{onClick:function(){return e.props.login(e.state.password)},children:"Submit"})]})]})})}}]),n}(a.Component),w=n(12),I=n.n(w),y=n(13),S=n.n(y),k=function(e){var t=[S.a.TextInput];return e.wrong&&t.push(S.a.Wrong),Object(m.jsxs)("div",{className:t.join(" "),children:[Object(m.jsx)("label",{htmlFor:e.id,children:e.name}),Object(m.jsx)("input",{type:"text",id:e.id,name:e.id,value:e.value,onChange:e.onChange}),e.equal?Object(m.jsxs)("p",{children:[e.name," t\xeam de ter exatamente ",e.len," d\xedgitos."]}):Object(m.jsxs)("p",{children:[e.name," t\xeam de ter ter mais de ",e.len," d\xedgitos."]})]})},N=n(14),L=n.n(N),D=function(e){var t=[L.a.NumberInput];return e.wrong&&t.push(L.a.Wrong),Object(m.jsxs)("div",{className:t.join(" "),children:[Object(m.jsx)("label",{htmlFor:e.id,children:e.name}),Object(m.jsx)("input",{type:"number",min:e.min,max:e.max,id:e.id,name:e.id,value:e.value,onChange:e.onChange}),Object(m.jsxs)("p",{children:[e.name," t\xeam de estar entre os ",e.min," e os ",e.max]})]})},A=n(26),F=n.n(A),G=function(e){return Object(m.jsxs)("div",{className:F.a.Checkbox,children:[Object(m.jsx)("label",{htmlFor:e.id,children:e.name}),Object(m.jsx)("input",{type:"checkbox",defaultChecked:e.checked,name:e.id,id:e.id,value:e.checked,onClick:e.onClick})]})},P=n(15),R=n.n(P),M=function(e){return Object(m.jsxs)("div",{className:R.a.Radio,children:[Object(m.jsx)("p",{children:e.text}),e.options.map((function(t,n){return Object(m.jsxs)("div",{className:R.a.option,children:[Object(m.jsx)("label",{htmlFor:t.name,children:t.name}),Object(m.jsx)("input",{onChange:e.onChange,type:"radio",name:e.name,id:t.name,value:t.value,defaultChecked:0===n})]},t.value)}))]})},T=[{name:"Feminino",value:"female",id:"female"},{name:"Masculino",value:"male",id:"male"}],U=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={id:"",idade:"",estrangeiro:!1,desvios:!1,genero:"",nacionalidade:"",descricaoDesvios:"",validId:!0,validIdade:!0,validGender:!0,validNacionalidade:!0,validDesvios:!0},e.onChangeId=function(t){var n=t.target.value;n.length>6||e.setState({id:n})},e.clear=function(){e.setState({id:"",idade:"",estrangeiro:!1,desvios:!1,genero:"",nacionalidade:"",descricaoDesvios:"",validId:!0,validIdade:!0,validGender:!0,validNacionalidade:!0,validDesvios:!0})},e.onChangeIdade=function(t){var n=t.target.value,a=parseInt(n),o=1===n.length;a<4&&o&&1!==a||a>11||e.setState({idade:a||""})},e.onChangeGenero=function(t){var n=t.target.value;console.log(n),e.setState({genero:n})},e.onChangeNacionalidade=function(t){var n=t.target.value;e.setState({nacionalidade:n})},e.onChangeDesvios=function(t){var n=t.target.value;e.setState({descricaoDesvios:n})},e.onClickDesvios=function(){e.setState({desvios:!e.state.desvios})},e.onClickEstrangeiro=function(){e.setState({estrangeiro:!e.state.estrangeiro})},e.checkFieldValidity=function(){var t=e.state.id&&6===e.state.id.length,n=e.state.idade&&4<=e.state.idade<=11,a=T.map((function(e){return e.value})).includes(e.state.genero),o=!e.state.estrangeiro||e.state.nacionalidade&&e.state.nacionalidade.length>2,i=!e.state.desvios||e.state.descricaoDesvios&&e.state.descricaoDesvios.length>2;return e.setState({validId:t,validIdade:n,validGender:a,validNacionalidade:o,validDesvios:i}),[t,n,a,o,i].every((function(e){return e}))},e.onSubmit=function(){if(!!e.checkFieldValidity()){var t=e.state.id,n=e.state.idade,a=e.state.genero,o=e.state.estrangeiro?e.state.nacionalidade:"portuguesa",i=e.state.desvios?e.state.descricaoDesvios:"";fetch("https://biovisualspeech.eu.pythonanywhere.com/newProfile/",{headers:{idTerapeuta:"template",idCrianca:t,idadeCrianca:n.toString(),portuguesLinguaMae:o,genero:a,desvios:i},method:"Post"}).then((function(t){e.clear()}))}},e}return Object(c.a)(n,[{key:"render",value:function(){return Object(m.jsx)("div",{className:I.a.Form,children:Object(m.jsxs)("div",{className:I.a.Box,children:[Object(m.jsx)("h1",{children:"Identifica\xe7\xe3o do Volunt\xe1rio"}),Object(m.jsx)(k,{name:"Identificador",wrong:!this.state.validId,id:"IdCrianca",len:6,value:this.state.id,onChange:this.onChangeId,equal:!0}),Object(m.jsx)(D,{name:"Idade",id:"IdadeCrianca",value:this.state.idade,onChange:this.onChangeIdade,min:4,max:11,wrong:!this.state.validIdade}),Object(m.jsx)(G,{name:"Portugu\xeas \xe9 L\xedngua M\xe3e?",id:"estrangeiro",checked:!this.state.estrangeiro,onClick:this.onClickEstrangeiro}),Object(m.jsx)(G,{name:"Desvios na fala?",id:"desvios",checked:this.state.desvios,onClick:this.onClickDesvios}),Object(m.jsx)(M,{onChange:this.onChangeGenero,options:T,name:"Gender",text:"G\xe9nero"}),this.state.estrangeiro?Object(m.jsx)(k,{name:"Nacionalidade",wrong:!this.state.validNacionalidade,id:"Nacionalidade",value:this.state.nacionalidade,onChange:this.onChangeNacionalidade,len:2}):null,this.state.desvios?Object(m.jsx)(k,{name:"Desvios Na Fala",wrong:!this.state.validDesvios,id:"Desvios",value:this.state.descricaoDesvios,onChange:this.onChangeDesvios,len:2}):null,Object(m.jsx)("button",{onClick:this.onSubmit,children:"Enviar"})]})})}}]),n}(a.Component),B=n(27),W=n.n(B),E=n(16),q=n.n(E),V=n(17),z=n.n(V),J=n(40),H=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).generateId=function(){var e=Math.round(10*Math.random());return Object(J.a)().substring(e,e+6)},e.getId=function(){var t=localStorage.getItem("id");return console.log(t),null===t&&(t=e.generateId(),localStorage.setItem("id",t)),t},e.changeId=function(){var t=prompt("Qual o novo id?");t&&6===t.length?(localStorage.setItem("id",t),e.setState({id:t})):alert("Id Inv\xe1lido! Tente novamente.")},e.onDoubleClick=function(){var t=e.generateId();localStorage.setItem("id",t),e.setState({id:t})},e.mouseDown=function(){var t=setTimeout((function(t){return e.changeId()}),1e3);e.setState({timeout:t})},e.mouseUp=function(){clearTimeout(e.state.timeout)};var a=e.getId();return e.state={id:a,timeout:null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=[z.a.GameLabel];return/Mobi|Android/i.test(navigator.userAgent)&&e.push(z.a.MobileLabel),Object(m.jsx)("div",{className:e.join(" "),onDoubleClick:this.onDoubleClick,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,children:this.state.id})}}]),n}(a.Component),Q=n(8),X=n.n(Q),Y=n(9),K=n(18),Z=n.n(K),$=0,ee=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={recording:!1},e.prepareMicrophone=Object(Y.a)(X.a.mark((function t(){var n;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:n=t.sent,e.mediaRecorder=new MediaRecorder(n),e.mediaRecorder.addEventListener("dataavailable",e.onStart),e.mediaRecorder.addEventListener("stop",e.onStop);case 6:case"end":return t.stop()}}),t)}))),e.onStart=function(){var t=Object(Y.a)(X.a.mark((function t(n){var a,o,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.data,o=n.timecode,i=void 0===o?Date.now():o,e.processSoundData(a,i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStop=function(t){var n=t.data,a=t.timecode,o=void 0===a?Date.now():a;!n||!n.length||e.processSoundData(n,o)},e.processSoundData=function(){var t=Object(Y.a)(X.a.mark((function t(n,a){var o,i;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendDataToServer(n,a,$++);case 2:return o=t.sent,t.next=5,o.text();case 5:i=t.sent,e.props.progressGame(i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onClick=function(){e.state.recording?e.stop():e.start()},e.start=function(){void 0===e.mediaRecorder||(e.state.recording||($=0,e.mediaRecorder.start(500),e.setState({recording:!0})))},e.stop=function(){void 0===e.mediaRecorder||(!e.state.recording||(e.mediaRecorder.stop(),e.setState({recording:!1})))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.prepareMicrophone()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){var e=[Z.a.AudioRecorder];return this.state.recording&&e.push(Z.a.Recording),Object(m.jsx)("button",{className:e.join(" "),onClick:this.onClick,children:Object(m.jsx)("i",{className:"material-icons",children:this.state.recording?"mic_off":"mic"})})}}]),n}(a.Component),te=new E.UnityContent("Build/webgl1/game.json","Build/webgl1/UnityLoader.js"),ne="https://biovisualspeech.eu.pythonanywhere.com",ae=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={label:"",gameId:0},e.increaseId=function(){e.setState({gameId:e.state.gameId+1})},e.prepareUnityCommunication=function(){te.on("GameOver",(function(){e.changeLabel()})),te.on("GameStart",(function(t){e.changeLabel(t.split("_")[1]),"Menu"!==t&&e.increaseId()}))},e.changeLabel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState({label:t})},e.progressGame=function(t){console.log(t);var n=e.classifyProduction(JSON.parse(t));console.log(n),n&&te.send("Character","moveCharacter","True")},e.classifyProduction=function(t){var n=t.gameId||-1,a=t.response||!1;return parseInt(n)===e.state.gameId&&"true"===a.toLowerCase()},e.sendDataToServer=function(t,n,a){var o=new FormData;o.append("file",t);var i=t.length||t.size,r=localStorage.getItem("id");return fetch("".concat(ne,"/postFileWebm/"),{headers:{name:"".concat(r).concat(n),segment:a,id:r,label:e.state.label,gameId:e.state.gameId,"Content-Length":i,extension:"webm","Content-Range":"bytes 0-"+i+"/"+i,"Content-Transfer-Encoding":"binary","Accept-Ranges":"bytes"},method:"POST",body:o})},e.getSize=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=1920/1080,n=window.innerHeight;e||(n-=110);var a=n*t;return a>window.innerWidth&&(n=(a=window.innerWidth)/t),{height:"".concat(n,"px"),width:"".concat(a,"px")}},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.prepareUnityCommunication()}},{key:"render",value:function(){var e=this,t=/Mobi|Android/i.test(navigator.userAgent),n=this.getSize(t);return window.addEventListener("resize",(function(){var n=e.getSize(t),a=document.querySelector("#Game");a&&(a.style.height=n.height,a.style.width=n.width)})),Object(m.jsxs)("div",{style:n,className:W.a.Unity,id:"Game",children:[Object(m.jsx)(q.a,{unityContent:te}),Object(m.jsx)(H,{}),this.state.label?Object(m.jsx)(ee,{progressGame:this.progressGame,sendDataToServer:this.sendDataToServer}):null]})}}]),n}(a.Component),oe="biovisualspeech",ie=["Game"],re=["Form"],se=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={page:"Game",wrongPassword:!1,loggedIn:!1},e.getPage=function(t){switch(t){case"Login":return Object(m.jsx)(C,{login:e.login,wrong:e.state.wrongPassword});case"Form":return Object(m.jsx)(U,{});case"Game":default:return Object(m.jsx)(ae,{})}},e.hashPassword=function(e){return e},e.login=function(t){e.hashPassword(t)!==oe?e.setState({wrongPassword:!0}):e.setState({page:"Form",wrongPassword:!1,loggedIn:!0})},e.changePage=function(t){"Logout"===t&&(e.logout(),t=e.state.page);var n=re.includes(e.state.page);!e.state.loggedIn&&n&&(t="Login"),e.setState({page:t})},e.logout=function(){e.setState({loggedIn:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.getPage(this.state.page),t=/Mobi|Android/i.test(navigator.userAgent);return Object(m.jsxs)("div",{className:g.a.App,children:[t?null:Object(m.jsx)(b,{logged:this.state.loggedIn,page:this.state.page,logout:this.logout,loggedIn:re,loggedOut:ie,changePage:this.changePage}),e,t?null:Object(m.jsx)(x,{})]})}}]),n}(a.Component),ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))};r.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(se,{})}),document.getElementById("root")),ce()}],[[38,1,2]]]);
//# sourceMappingURL=main.a864cb5e.chunk.js.map