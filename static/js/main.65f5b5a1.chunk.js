(this.webpackJsonpbvs_unity_game=this.webpackJsonpbvs_unity_game||[]).push([[0],[,,,,,,function(e,t,n){e.exports={Navbar:"navbar_Navbar__3PxbQ",title:"navbar_title__RCLI3",navButton:"navbar_navButton__2LemL",active:"navbar_active__39chN",pages:"navbar_pages__qgGYC"}},function(e,t,n){e.exports={Login:"Login_Login__tf7ua",Content:"Login_Content__2X69_",input:"Login_input__36GEz",Form:"Login_Form__joPfR",Wrong:"Login_Wrong__2fN4p"}},,function(e,t,n){e.exports={TextInput:"TextInput_TextInput__3GIVo",Wrong:"TextInput_Wrong__2V5vb",inputDiv:"TextInput_inputDiv__3yBhF"}},,,,function(e,t,n){e.exports={Form:"Form_Form__1dRuo",Box:"Form_Box__1xrJ5"}},function(e,t,n){e.exports={NumberInput:"NumberInput_NumberInput__2wBxG",Wrong:"NumberInput_Wrong__1lM4i"}},function(e,t,n){e.exports={Radio:"Radio_Radio__3q7yR",option:"Radio_option__2rmPj"}},,function(e,t,n){e.exports={GameLabel:"GameLabel_GameLabel__225yT",MobileLabel:"GameLabel_MobileLabel__HqxA7"}},function(e,t,n){e.exports={AudioRecorder:"AudioRecorder_AudioRecorder__1rzAT",Recording:"AudioRecorder_Recording__38jbA"}},,,,,,function(e,t,n){e.exports={App:"App_App__1-QqC","App-logo":"App_App-logo__elqEI","App-logo-spin":"App_App-logo-spin__k2o3P","App-header":"App_App-header__22LXj","App-link":"App_App-link__1acGg",Mobile:"App_Mobile__1CNpl"}},function(e,t,n){e.exports={Footer:"footer_Footer__2XqUH"}},function(e,t,n){e.exports={TimeInput:"TimeInput_TimeInput__-CrLV"}},function(e,t,n){e.exports={Checkbox:"Checkbox_Checkbox__2IsiI"}},function(e,t,n){e.exports={Unity:"Game_Unity__vFcUV"}},,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(23),r=n.n(i),s=(n(33),n(2)),c=n(3),d=n(5),l=n(4),u=n(24),g=n.n(u),h=n(11),m=n(6),p=n.n(m),v=n(0),b=function(e){var t=e.loggedOut;t=e.logged?["Logout"].concat(Object(h.a)(e.loggedIn),Object(h.a)(t)):["Login"].concat(Object(h.a)(t));var n=[p.a.navButton,p.a.active].join(" "),a=p.a.navButton,o=t.map((function(t){return Object(v.jsx)("button",{onClick:function(){return e.changePage(t)},className:t===e.page?n:a,active:"true",children:t},t)}));return Object(v.jsxs)("div",{className:p.a.Navbar,children:[Object(v.jsx)("h3",{className:p.a.title,children:"VisualSpeech Sibilants Game"}),Object(v.jsx)("div",{className:p.a.pages,children:o})]})},j=n(25),f=n.n(j),x=function(e){return Object(v.jsxs)("div",{className:f.a.Footer,children:[Object(v.jsx)("span",{children:" \xa9"})," BioVisualSpeech"]})},_=n(7),O=n.n(_),C=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={password:""},e.onChangePassword=function(t){var n=t.target.value;e.setState({password:n})},e.onKeyPress=function(t){"Enter"===t.code&&e.props.login(e.state.password)},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.props.wrong?[O.a.Form,O.a.Wrong].join(" "):O.a.Form;return Object(v.jsx)("div",{className:O.a.Login,children:Object(v.jsxs)("div",{className:O.a.Content,children:[Object(v.jsx)("h2",{children:"Login"}),Object(v.jsxs)("div",{className:t,children:[Object(v.jsxs)("div",{className:O.a.input,children:[Object(v.jsx)("label",{htmlFor:"password",children:"Password"}),Object(v.jsx)("input",{onKeyPress:this.onKeyPress,type:"password",id:"password",onChange:this.onChangePassword})]}),Object(v.jsx)("p",{children:"Password Errada"}),Object(v.jsx)("button",{onClick:function(){return e.props.login(e.state.password)},children:"Submit"})]})]})})}}]),n}(a.Component),I=n(13),w=n.n(I),y=n(9),S=n.n(y),D=function(e){var t=[S.a.TextInput];return e.wrong&&t.push(S.a.Wrong),Object(v.jsxs)("div",{className:t.join(" "),children:[Object(v.jsx)("label",{htmlFor:e.id,children:e.name}),Object(v.jsxs)("div",{className:S.a.inputDiv,tabIndex:0,children:[e.prefix?Object(v.jsx)("span",{children:e.prefix}):null,Object(v.jsx)("input",{type:"text",id:e.id,name:e.id,value:e.value,onChange:e.onChange})]}),e.equal?Object(v.jsxs)("p",{children:[e.name," t\xeam de ter exatamente ",e.len," d\xedgitos."]}):Object(v.jsxs)("p",{children:[e.name," t\xeam de ter ter mais de ",e.len," d\xedgitos."]})]})},k=n(14),N=n.n(k),L=function(e){var t=[N.a.NumberInput];return e.wrong&&t.push(N.a.Wrong),Object(v.jsxs)("div",{className:t.join(" "),children:[Object(v.jsx)("label",{htmlFor:e.id,children:e.name}),Object(v.jsx)("input",{type:"number",min:e.min,max:e.max,id:e.id,name:e.id,value:e.value,onChange:e.onChange}),Object(v.jsxs)("p",{children:[e.name," t\xeam de estar entre os ",e.min," e os ",e.max]})]})},T=n(26),F=n.n(T),A=function(e){var t=e.valueDate,n=e.valueTime;return Object(v.jsxs)("div",{className:F.a.TimeInput,children:[Object(v.jsx)("label",{htmlFor:e.id,children:e.name}),Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{type:"date",name:e.id,id:e.id,onChange:e.onChangeDate,value:t}),Object(v.jsx)("input",{type:"time",name:e.id,id:e.id,onChange:e.onChangeTime,value:n})]})]})},P=n(27),G=n.n(P),R=function(e){return Object(v.jsxs)("div",{className:G.a.Checkbox,children:[Object(v.jsx)("label",{htmlFor:e.id,children:e.name}),Object(v.jsx)("input",{type:"checkbox",defaultChecked:e.checked,name:e.id,id:e.id,value:e.checked,onClick:e.onClick})]})},M=n(15),B=n.n(M),E=function(e){return Object(v.jsxs)("div",{className:B.a.Radio,children:[Object(v.jsx)("p",{children:e.text}),e.options.map((function(t,n){return Object(v.jsxs)("div",{className:B.a.option,children:[Object(v.jsx)("label",{htmlFor:t.name,children:t.name}),Object(v.jsx)("input",{onChange:e.onChange,type:"radio",name:e.name,id:t.name,value:t.value,defaultChecked:0===n})]},t.value)}))]})},U=[{name:"Feminino",value:"female",id:"female"},{name:"Masculino",value:"male",id:"male"}],W=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).getCurrentDate=function(e){var t=Intl.DateTimeFormat("pt",{year:"numeric"}).format(e),n=Intl.DateTimeFormat("pt",{month:"numeric"}).format(e),a=Intl.DateTimeFormat("pt",{day:"numeric"}).format(e),o=2===n.length?n:"0".concat(n),i=2===a.length?a:"0".concat(a);return"".concat(t,"-").concat(o,"-").concat(i)},e.getCurrentTime=function(e){var t=Intl.DateTimeFormat("pt",{hour:"numeric"}).format(e),n=Intl.DateTimeFormat("pt",{minute:"numeric"}).format(e),a=2===t.length?t:"0".concat(t),o=2===n.length?n:"0".concat(n);return"".concat(a,":").concat(o)},e.onChangeId=function(t){var n=t.target.value;n.length>6||e.setState({id:n})},e.clear=function(){var t=Date.now();e.setState({id:"",idade:"",estrangeiro:!1,desvios:!1,genero:"female",nacionalidade:"",descricaoDesvios:"",date:e.getCurrentDate(t),time:e.getCurrentTime(t),validId:!0,validIdade:!0,validGender:!0,validNacionalidade:!0,validDesvios:!0})},e.onChangeIdade=function(t){var n=t.target.value,a=parseInt(n),o=1===n.length;a<4&&o&&1!==a||a>11||e.setState({idade:a||""})},e.onChangeGenero=function(t){var n=t.target.value;e.setState({genero:n})},e.onChangeNacionalidade=function(t){var n=t.target.value;e.setState({nacionalidade:n})},e.onChangeDesvios=function(t){var n=t.target.value;e.setState({descricaoDesvios:n})},e.onClickDesvios=function(){e.setState({desvios:!e.state.desvios})},e.onClickEstrangeiro=function(){e.setState({estrangeiro:!e.state.estrangeiro})},e.checkFieldValidity=function(){var t=e.state.id&&6===e.state.id.length,n=e.state.idade&&4<=e.state.idade<=11,a=U.map((function(e){return e.value})).includes(e.state.genero),o=!e.state.estrangeiro||e.state.nacionalidade&&e.state.nacionalidade.length>2,i=!e.state.desvios||e.state.descricaoDesvios&&e.state.descricaoDesvios.length>2;return e.setState({validId:t,validIdade:n,validGender:a,validNacionalidade:o,validDesvios:i}),[t,n,a,o,i].every((function(e){return e}))},e.onSubmit=function(){if(!!e.checkFieldValidity()){var t=e.state.id,n=e.state.idade,a=e.state.genero,o=e.state.estrangeiro?e.state.nacionalidade:"portuguesa",i=e.state.desvios?e.state.descricaoDesvios:"";fetch("https://biovisualspeech.eu.pythonanywhere.com/newProfile/",{headers:{idTerapeuta:"template",idCrianca:t,idadeCrianca:n.toString(),portuguesLinguaMae:o,genero:a,desvios:i,data:e.state.date,time:e.state.time},method:"Post"}).then((function(t){e.clear()}))}},e.onChangeDate=function(t){var n=t.target.value;e.setState({date:n})},e.onChangeTime=function(t){var n=t.target.value;e.setState({time:n})},e.onKeyPress=function(t){"Enter"===t.code&&e.onSubmit()};var a=Date.now();return e.state={id:"",idade:"",estrangeiro:!1,desvios:!1,genero:"female",nacionalidade:"",descricaoDesvios:"",date:e.getCurrentDate(a),time:e.getCurrentTime(a),validId:!0,validIdade:!0,validGender:!0,validNacionalidade:!0,validDesvios:!0},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyPress)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:w.a.Form,children:Object(v.jsxs)("div",{className:w.a.Box,children:[Object(v.jsx)("h1",{children:"Identifica\xe7\xe3o do Volunt\xe1rio"}),Object(v.jsx)(D,{name:"Identificador",prefix:"BVS-",wrong:!this.state.validId,id:"IdCrianca",len:6,value:this.state.id,onChange:this.onChangeId,equal:!0}),Object(v.jsx)(A,{name:"Tempo de In\xedcio da Sess\xe3o",id:"TempoSessao",valueDate:this.state.date,onChangeDate:this.onChangeDate,valueTime:this.state.time,onChangeTime:this.onChangeTime}),Object(v.jsx)(L,{name:"Idade",id:"IdadeCrianca",value:this.state.idade,onChange:this.onChangeIdade,min:4,max:11,wrong:!this.state.validIdade}),Object(v.jsx)(R,{name:"Portugu\xeas \xe9 L\xedngua M\xe3e?",id:"estrangeiro",checked:!this.state.estrangeiro,onClick:this.onClickEstrangeiro}),this.state.estrangeiro?Object(v.jsx)(D,{name:"Nacionalidade",wrong:!this.state.validNacionalidade,id:"Nacionalidade",value:this.state.nacionalidade,onChange:this.onChangeNacionalidade,len:2}):null,Object(v.jsx)(R,{name:"Desvios na Fala?",id:"desvios",checked:this.state.desvios,onClick:this.onClickDesvios}),this.state.desvios?Object(v.jsx)(D,{name:"Desvios Na Fala",wrong:!this.state.validDesvios,id:"Desvios",value:this.state.descricaoDesvios,onChange:this.onChangeDesvios,len:2}):null,Object(v.jsx)(E,{onChange:this.onChangeGenero,options:U,name:"Gender",text:"G\xe9nero"}),Object(v.jsx)("button",{onClick:this.onSubmit,children:"Enviar"})]})})}}]),n}(a.Component),V=n(28),q=n.n(V),z=n(16),K=n.n(z),J=n(17),H=n.n(J),Q=n(41),X=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n),(e=t.call(this)).generateId=function(){var e=Math.round(10*Math.random());return Object(Q.a)().substring(e,e+6)},e.getId=function(){var t=localStorage.getItem("id");return console.log(t),null===t&&(t=e.generateId(),localStorage.setItem("id",t)),t},e.changeId=function(){var t=prompt("Qual o novo id?");t&&6===t.length?(localStorage.setItem("id",t),e.setState({id:t})):alert("Id Inv\xe1lido! Tente novamente.")},e.onDoubleClick=function(){var t=e.generateId();localStorage.setItem("id",t),e.setState({id:t})},e.mouseDown=function(){var t=setTimeout((function(t){return e.changeId()}),1e3);e.setState({timeout:t})},e.mouseUp=function(){clearTimeout(e.state.timeout)};var a=e.getId();return e.state={id:a,timeout:null},e}return Object(c.a)(n,[{key:"render",value:function(){var e=[H.a.GameLabel];return/Mobi|Android/i.test(navigator.userAgent)&&e.push(H.a.MobileLabel),Object(v.jsxs)("div",{className:e.join(" "),onDoubleClick:this.onDoubleClick,onMouseDown:this.mouseDown,onMouseUp:this.mouseUp,children:["BVS-  ",this.state.id]})}}]),n}(a.Component),Y=n(8),Z=n.n(Y),$=n(10),ee=n(18),te=n.n(ee),ne=0,ae=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={recording:!1},e.prepareMicrophone=Object($.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 2:n=t.sent,e.mediaRecorder=new MediaRecorder(n),e.mediaRecorder.addEventListener("dataavailable",e.onStart),e.mediaRecorder.addEventListener("stop",e.onStop);case 6:case"end":return t.stop()}}),t)}))),e.onStart=function(){var t=Object($.a)(Z.a.mark((function t(n){var a,o,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.data,o=n.timecode,i=void 0===o?Date.now():o,e.processSoundData(a,i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStop=function(t){var n=t.data,a=t.timecode,o=void 0===a?Date.now():a;!n||!n.length||e.processSoundData(n,o)},e.processSoundData=function(){var t=Object($.a)(Z.a.mark((function t(n,a){var o,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.sendDataToServer(n,a,ne++);case 2:return o=t.sent,t.next=5,o.text();case 5:i=t.sent,e.props.progressGame(i);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onClick=function(){e.state.recording?e.stop():e.start()},e.start=function(){void 0===e.mediaRecorder||(e.state.recording||(ne=0,e.mediaRecorder.start(500),e.setState({recording:!0})))},e.stop=function(){void 0===e.mediaRecorder||(!e.state.recording||(e.mediaRecorder.stop(),e.setState({recording:!1})))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.prepareMicrophone()}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"render",value:function(){var e=[te.a.AudioRecorder];return this.state.recording&&e.push(te.a.Recording),Object(v.jsx)("button",{className:e.join(" "),onClick:this.onClick,children:Object(v.jsx)("i",{className:"material-icons",children:this.state.recording?"mic_off":"mic"})})}}]),n}(a.Component),oe=new z.UnityContent("Build/webgl1/game.json","Build/webgl1/UnityLoader.js"),ie="https://biovisualspeech.eu.pythonanywhere.com",re=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={label:"",gameId:0,decibel:0},e.increaseId=function(){e.setState({gameId:e.state.gameId+1})},e.prepareUnityCommunication=function(){oe.on("GameOver",(function(){e.changeLabel()})),oe.on("GameStart",(function(t){e.changeLabel(t.split("_")[1]),"Menu"!==t&&e.increaseId()}))},e.changeLabel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.setState({label:t})},e.progressGame=function(t){console.log(t);var n=e.classifyProduction(JSON.parse(t));console.log(n),n&&oe.send("Character","moveCharacter","True")},e.classifyProduction=function(t){var n=t.gameId||-1,a=t.response||!1;return parseInt(n)===e.state.gameId&&"true"===a.toLowerCase()},e.sendDataToServer=function(t,n,a){var o=new FormData;o.append("file",t);var i=t.length||t.size,r=localStorage.getItem("id");return fetch("".concat(ie,"/postFileWebm/"),{headers:{name:"".concat(r).concat(n),segment:a,id:r,label:e.state.label,gameId:e.state.gameId,"Content-Length":i,extension:"webm","Content-Range":"bytes 0-"+i+"/"+i,"Content-Transfer-Encoding":"binary","Accept-Ranges":"bytes",browser:navigator.userAgent,platform:navigator.platform},method:"POST",body:o})},e.getSize=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=1920/1080,n=window.innerHeight;e||(n-=110);var a=n*t;return a>window.innerWidth&&(n=(a=window.innerWidth)/t),{height:"".concat(n,"px"),width:"".concat(a,"px")}},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.prepareUnityCommunication()}},{key:"render",value:function(){var e=this,t=/Mobi|Android/i.test(navigator.userAgent),n=this.getSize(t);return window.addEventListener("resize",(function(){var n=e.getSize(t),a=document.querySelector("#Game");a&&(a.style.height=n.height,a.style.width=n.width)})),Object(v.jsxs)("div",{style:n,className:q.a.Unity,id:"Game",children:[Object(v.jsx)(K.a,{unityContent:oe}),Object(v.jsx)(X,{}),this.state.label?Object(v.jsx)(ae,{progressGame:this.progressGame,sendDataToServer:this.sendDataToServer}):null]})}}]),n}(a.Component),se="biovisualspeech",ce=["Game"],de=["Form"],le=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={page:"Game",wrongPassword:!1,loggedIn:!1},e.getPage=function(t){switch(t){case"Login":return Object(v.jsx)(C,{login:e.login,wrong:e.state.wrongPassword});case"Form":return Object(v.jsx)(W,{});case"Game":default:return Object(v.jsx)(re,{})}},e.hashPassword=function(e){return e},e.login=function(t){e.hashPassword(t)!==se?e.setState({wrongPassword:!0}):e.setState({page:"Form",wrongPassword:!1,loggedIn:!0})},e.changePage=function(t){"Logout"===t&&(e.logout(),t=e.state.page);var n=de.includes(e.state.page);!e.state.loggedIn&&n&&(t="Login"),e.setState({page:t})},e.logout=function(){e.setState({loggedIn:!1})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this.getPage(this.state.page),t=/Mobi|Android/i.test(navigator.userAgent);return Object(v.jsxs)("div",{className:g.a.App,children:[t?null:Object(v.jsx)(b,{logged:this.state.loggedIn,page:this.state.page,logout:this.logout,loggedIn:de,loggedOut:ce,changePage:this.changePage}),e,t?null:Object(v.jsx)(x,{})]})}}]),n}(a.Component),ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))};r.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(le,{})}),document.getElementById("root")),ue()}],[[39,1,2]]]);
//# sourceMappingURL=main.65f5b5a1.chunk.js.map